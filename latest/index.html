<!DOCTYPE html>
<html class="no-js" lang="en"> <head><meta charset="utf-8"/><meta content="width=device-width,initial-scale=1" name="viewport"/><link href="installation/" rel="next"/><link href="assets/images/icon.svg" rel="icon"/><meta content="mkdocs-1.6.1, mkdocs-material-9.2.8" name="generator"/><title>Metanno</title><link href="assets/stylesheets/main.046329b4.min.css" rel="stylesheet"/><link href="assets/stylesheets/palette.85d0ee34.min.css" rel="stylesheet"/><link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link href="assets/_mkdocstrings.css" rel="stylesheet"/><link href="override.css" rel="stylesheet"/><link href="assets/stylesheets/extra.css" rel="stylesheet"/><link href="clickable-code.css" rel="stylesheet"/><link href="cards.css" rel="stylesheet"/><link href="pret.css" rel="stylesheet"/><script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr"> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/> <input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/> <label class="md-overlay" for="__drawer"></label> <div data-md-component="skip"> <a class="md-skip" href="#metanno"> Skip to content </a> </div> <div data-md-component="announce"> </div> <div data-md-color-scheme="default" data-md-component="outdated" hidden=""> </div> <header class="md-header md-header--shadow" data-md-component="header"> <nav aria-label="Header" class="md-header__inner md-grid"> <a aria-label="Metanno" class="md-header__button md-logo" data-md-component="logo" href="." title="Metanno"> <img alt="logo" src="assets/images/icon.svg"/> </a> <label class="md-header__button md-icon" for="__drawer"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg> </label> <div class="md-header__title" data-md-component="header-title"> <div class="md-header__ellipsis"> <div class="md-header__topic"> <span class="md-ellipsis"> Metanno </span> </div> <div class="md-header__topic" data-md-component="header-topic"> <span class="md-ellipsis"> Overview </span> </div> </div> </div> <form class="md-header__option" data-md-component="palette"> <input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/> <label class="md-header__button md-icon" for="__palette_2" hidden="" title="Switch to dark mode"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"></path></svg> </label> <input aria-label="Switch to light mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="" data-md-color-primary="indigo" data-md-color-scheme="slate" id="__palette_2" name="__palette" type="radio"/> <label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to light mode"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"></path></svg> </label> </form> <label class="md-header__button md-icon" for="__search"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> </label> <div class="md-search" data-md-component="search" role="dialog"> <label class="md-search__overlay" for="__search"></label> <div class="md-search__inner" role="search"> <form class="md-search__form" name="search"> <input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/> <label class="md-search__icon md-icon" for="__search"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg> </label> <nav aria-label="Search" class="md-search__options"> <button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg> </button> </nav> </form> <div class="md-search__output"> <div class="md-search__scrollwrap" data-md-scrollfix=""> <div class="md-search-result" data-md-component="search-result"> <div class="md-search-result__meta"> Initializing search </div> <ol class="md-search-result__list" role="presentation"></ol> </div> </div> </div> </div> </div> </nav> </header> <div class="md-container" data-md-component="container"> <main class="md-main" data-md-component="main"> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0"> <label class="md-nav__title" for="__drawer"> <a aria-label="Metanno" class="md-nav__button md-logo" data-md-component="logo" href="." title="Metanno"> <img alt="logo" src="assets/images/icon.svg"/> </a> Metanno </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/> <label class="md-nav__link md-nav__link--active" for="__toc"> <span class="md-ellipsis"> Overview </span> <span class="md-nav__icon md-icon"></span> </label> <a class="md-nav__link md-nav__link--active" href="."> <span class="md-ellipsis"> Overview </span> </a> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="#features"> Features </a> <nav aria-label="Features" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#annotate-anything"> Annotate anything </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#easy-setup"> Easy setup </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#interactive-and-customizable-by-design"> Interactive and customizable by design </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#why-another-annotation-tool"> Why another annotation tool ? </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#demo"> Demo </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="installation/"> <span class="md-ellipsis"> Installation </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a class="md-nav__link" href="components/"> <span class="md-ellipsis"> Building Blocks </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a class="md-nav__link" href="reference/metanno/"> <span class="md-ellipsis"> Reference </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="changelog/"> <span class="md-ellipsis"> Changelog </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="#features"> Features </a> <nav aria-label="Features" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#annotate-anything"> Annotate anything </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#easy-setup"> Easy setup </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#interactive-and-customizable-by-design"> Interactive and customizable by design </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#why-another-annotation-tool"> Why another annotation tool ? </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#demo"> Demo </a> </li> </ul> </nav> </div> </div> </div> <div class="md-content" data-md-component="content"> <article class="md-content__inner md-typeset"> <script>window.PRET_PICKLE_FILE = 'assets/bundle.97ea4294a60487619ac2.pkl';window.PRET_REMOTE_IMPORTS = ['metanno'];</script><h1 id="metanno">Metanno</h1> <p>Metanno is a Python library aimed at building dynamic annotation interfaces customized to your needs without leaving your notebook.</p> <p>At the moment, Metanno focuses on textual documents with rich structured entities. Its main goals are:</p> <ul> <li>modularity: you decide how many views of your data are needed</li> <li>customization: you can easily customize the software behavior in Python and see the changes immediately</li> <li>interactivity: all of your annotations are immediately available as Python objects as soon as you edit something</li> </ul> <h2 id="features">Features</h2> <h3 id="annotate-anything">Annotate anything</h3> <p>Metanno allows users to create a wide variety of annotations, including multiline and nested span annotations with text views, as well as document level, relational, or complex annotations with table views.</p> <p>It also supports multiple data types, including hyperlinks, text, and lists, and allows users to switch between text and table views for their annotations.</p> <h3 id="easy-setup">Easy setup</h3> <p>Metanno is easy to install with a simple</p> <div class="highlight" data-md-color-scheme="slate"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>metanno
</code></pre></div> <p>Unlike many other alternatives, when used in JupyterLab, it does not require users to open any ports or leave their notebook to launch a server. It also allows users to write their own apps in Python and while automatically benefiting from the speed of client run Javascript code with a React-based implementation.</p> <h3 id="interactive-and-customizable-by-design">Interactive and customizable by design</h3> <ul> <li>visualize and edit the current app state directly in Python</li> <li>update the UI in Python, execute the cell and see the results immediately</li> <li>immutable state management, any state mutation is recorded and undoable</li> <li>many event handlers to react to any user action (click, hover, type, ...)</li> </ul> <p>Metanno is designed to be highly interactive and customizable, with the ability to visualize and edit app states directly in Python and update the UI in real time. It also offers a variety of event handlers that allow users to react to any user action. This makes it easy to create tailored and responsive apps UIs in JupyterLab.</p> <h2 id="why-another-annotation-tool">Why another annotation tool ?</h2> <p>The choice of annotation software must be taken into account in the design of the annotation scheme. For example, it is challenging to annotate implicit/document-level entities in Brat or to annotate relations on multiple lines, and impossible to handle multiple documents at once. There are many annotation tools available (see <a href="https://pubmed.ncbi.nlm.nih.gov/31838514/">Neves et al.</a>), but most of them are either proprietary, poorly adapted to document or multi-document annotation, require a complex installation that is not compatible with existing remote work environments, or are difficult to customize. Finally, the standardization of annotation levels (mention / relation / event) is an obstacle to the development of new tasks. Given the limitations of the existing softwares and the difficulty to cover every need with a single static annotator, this project was initiated to provide a modular and fully customizable annotation framework, Metanno, and address these difficulties.</p> <h2 id="demo">Demo</h2> <p>Below is a simple example of a Metanno app that allows users to annotate text spans and visualize the annotations in a table. Just select spans of text to annotate them. Hold the Shift (or Maj) while selecting to delete spans instead.</p> <div class="pret-code-snippet"> <details><summary>Show code</summary> <div class="render-with-pret code--expandable highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pret</span><span class="w"> </span><span class="kn">import</span> <span class="n">component</span><span class="p">,</span> <span class="n">proxy</span><span class="p">,</span> <span class="n">use_tracked</span><span class="p">,</span> <span class="n">use_event_callback</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pret.ui.metanno</span><span class="w"> </span><span class="kn">import</span> <span class="n"><html><head></head><body><a class="clickable-discrete-link" href="components/annotated-text/#pret.ui.metanno.AnnotatedText">AnnotatedText</a></body></html></span>

<span class="n">state</span> <span class="o">=</span> <span class="n">proxy</span><span class="p">([</span>
    <span class="p">{</span><span class="s2">"text"</span><span class="p">:</span> <span class="s2">"soir"</span><span class="p">,</span> <span class="s2">"begin"</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">"end"</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"s-3-7"</span><span class="p">,</span> <span class="s2">"label"</span><span class="p">:</span> <span class="s2">"ENT"</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">"text"</span><span class="p">:</span> <span class="s2">"Charlie"</span><span class="p">,</span> <span class="s2">"begin"</span><span class="p">:</span> <span class="mi">59</span><span class="p">,</span> <span class="s2">"end"</span><span class="p">:</span> <span class="mi">66</span><span class="p">,</span> <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"s-59-66"</span><span class="p">,</span> <span class="s2">"label"</span><span class="p">:</span> <span class="s2">"ENT"</span><span class="p">},</span>
<span class="p">])</span>

<span class="n">text</span> <span class="o">=</span> <span class="p">(</span><span class="s2">"Le soir, après avoir mangé sa soupe aux choux noyée "</span>
        <span class="s2">"d’eau, Charlie allait toujours dans la chambre de ses "</span>
        <span class="s2">"quatre grands-parents pour écouter leurs histoires, "</span>
        <span class="s2">"et pour leur souhaiter bonne nuit.</span><span class="se">\n</span><span class="s2">"</span>
        <span class="s2">"Chacun d’eux avait plus de quatre-vingt-dix ans. Ils "</span>
        <span class="s2">"étaient fripés comme des pruneaux secs, ossus comme "</span>
        <span class="s2">"des squelettes et, toute la journée, jusqu’à l’apparition "</span>
        <span class="s2">"de Charlie, ils se pelotonnaient dans leur lit, deux de "</span>
        <span class="s2">"chaque côté, coiffés de bonnets de nuit qui leur tenaient "</span>
        <span class="s2">"chaud, passant le temps à ne rien faire."</span><span class="p">)</span>


<span class="nd">@component</span>
<span class="k">def</span><span class="w"> </span><span class="nf">App</span><span class="p">():</span>
    <span class="n">view_state</span> <span class="o">=</span> <span class="n">use_tracked</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>

    <span class="nd">@use_event_callback</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">on_select</span><span class="p">(</span><span class="n">spans</span><span class="p">,</span> <span class="n">mod_keys</span><span class="p">):</span>
        <span class="k">if</span> <span class="s2">"Shift"</span> <span class="ow">in</span> <span class="n">mod_keys</span><span class="p">:</span>
            <span class="c1"># Delete overlapped spans if the user holds Shift</span>
            <span class="n">state</span><span class="p">[:]</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">x</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">state</span>
                <span class="k">if</span> <span class="nb">any</span><span class="p">((</span><span class="n">s</span><span class="p">[</span><span class="s1">'begin'</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">x</span><span class="p">[</span><span class="s1">'end'</span><span class="p">]</span> <span class="ow">or</span> <span class="n">s</span><span class="p">[</span><span class="s1">'end'</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">x</span><span class="p">[</span><span class="s1">'begin'</span><span class="p">])</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">spans</span><span class="p">)</span>
            <span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">state</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                <span class="p">[{</span><span class="o">**</span><span class="n">s</span><span class="p">,</span> <span class="s2">"id"</span><span class="p">:</span> <span class="sa">f</span><span class="s2">"s-</span><span class="si">{</span><span class="n">s</span><span class="p">[</span><span class="s1">'begin'</span><span class="p">]</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">s</span><span class="p">[</span><span class="s1">'end'</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="s2">"text"</span><span class="p">:</span> <span class="n">text</span><span class="p">[</span><span class="n">s</span><span class="p">[</span><span class="s1">'begin'</span><span class="p">]:</span><span class="n">s</span><span class="p">[</span><span class="s1">'end'</span><span class="p">]],</span> <span class="s2">"label"</span><span class="p">:</span> <span class="s2">"ENT"</span><span class="p">}</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">spans</span><span class="p">]</span>
            <span class="p">)</span>

    <span class="k">return</span> <span class="n"><html><head></head><body><a class="clickable-discrete-link" href="components/annotated-text/#pret.ui.metanno.AnnotatedText">AnnotatedText</a></body></html></span><span class="p">(</span>
        <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
        <span class="n">spans</span><span class="o">=</span><span class="n">view_state</span><span class="p">,</span>
        <span class="n">annotation_styles</span><span class="o">=</span><span class="p">{</span><span class="s2">"ENT"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"color"</span><span class="p">:</span> <span class="s2">"lightblue"</span><span class="p">}},</span>
        <span class="n">on_mouse_select</span><span class="o">=</span><span class="n">on_select</span><span class="p">,</span>
    <span class="p">)</span>


<span class="n">App</span><span class="p">()</span>
</code></pre></div> </details> <div class="pret-code-snippet-view-container"><div class="pret-code-snippet-view-content" data-pret-chunk-idx="0"></div></div></div> <p>Observe how the annotations are updated in the table below. The two views are synchronized because they share the same state (see the <code>state</code> variable in the code).</p> <div class="pret-code-snippet"> <details><summary>Show code</summary> <div class="render-with-pret code--expandable highlight"><pre><span></span><code><span class="c1"># ↑ Complete the code above with the following snippet ↑</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pret</span><span class="w"> </span><span class="kn">import</span> <span class="n">component</span><span class="p">,</span> <span class="n">use_tracked</span><span class="p">,</span> <span class="n">use_event_callback</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pret.ui.metanno</span><span class="w"> </span><span class="kn">import</span> <span class="n"><html><head></head><body><a class="clickable-discrete-link" href="components/table/#pret.ui.metanno.Table">Table</a></body></html></span>

<span class="n">columns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s2">"key"</span><span class="p">:</span> <span class="s2">"id"</span><span class="p">,</span> <span class="s2">"kind"</span><span class="p">:</span> <span class="s2">"text"</span><span class="p">,</span> <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"id"</span><span class="p">,</span> <span class="s2">"filterable"</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">"key"</span><span class="p">:</span> <span class="s2">"begin"</span><span class="p">,</span> <span class="s2">"kind"</span><span class="p">:</span> <span class="s2">"text"</span><span class="p">,</span> <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"begin"</span><span class="p">,</span> <span class="s2">"filterable"</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">"key"</span><span class="p">:</span> <span class="s2">"end"</span><span class="p">,</span> <span class="s2">"kind"</span><span class="p">:</span> <span class="s2">"text"</span><span class="p">,</span> <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"end"</span><span class="p">,</span> <span class="s2">"filterable"</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">"key"</span><span class="p">:</span> <span class="s2">"text"</span><span class="p">,</span> <span class="s2">"kind"</span><span class="p">:</span> <span class="s2">"text"</span><span class="p">,</span> <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"text"</span><span class="p">,</span> <span class="s2">"filterable"</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">"key"</span><span class="p">:</span> <span class="s2">"label"</span><span class="p">,</span> <span class="s2">"kind"</span><span class="p">:</span> <span class="s2">"text"</span><span class="p">,</span> <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"label"</span><span class="p">,</span> <span class="s2">"filterable"</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">"editable"</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">"choices"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"ENT"</span><span class="p">,</span> <span class="s2">"OTHER"</span><span class="p">]},</span>
<span class="p">]</span>

<span class="nd">@component</span>
<span class="k">def</span><span class="w"> </span><span class="nf">MyTable</span><span class="p">():</span>
    <span class="nd">@use_event_callback</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">on_cell_change</span><span class="p">(</span><span class="n">row_idx</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">new_value</span><span class="p">):</span>
        <span class="n">view_state</span><span class="p">[</span><span class="n">row_idx</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_value</span>

    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">state</span><span class="p">:</span>
        <span class="n">x</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">"label"</span><span class="p">,</span> <span class="s2">"ENT"</span><span class="p">)</span>  <span class="c1"># Ensure all rows have a label</span>

    <span class="n">view_state</span> <span class="o">=</span> <span class="n">use_tracked</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
    <span class="k">return</span> <span class="n"><html><head></head><body><a class="clickable-discrete-link" href="components/table/#pret.ui.metanno.Table">Table</a></body></html></span><span class="p">(</span>
        <span class="n">rows</span><span class="o">=</span><span class="n">view_state</span><span class="p">,</span>
        <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span>
        <span class="n">auto_filter</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">on_cell_change</span><span class="o">=</span><span class="n">on_cell_change</span><span class="p">,</span>
    <span class="p">)</span>

<span class="n">MyTable</span><span class="p">()</span>
</code></pre></div> </details> <div class="pret-code-snippet-view-container" style="height: 200px;"><div class="pret-code-snippet-view-content" data-pret-chunk-idx="1"></div></div></div> <div class="footnote"><hr/><ol></ol></div> </article> </div> </div> <button class="md-top md-icon" data-md-component="top" hidden="" type="button"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg> Back to top </button> </main> <footer class="md-footer"> <nav aria-label="Footer" class="md-footer__inner md-grid"> <a aria-label="Next: Installation" class="md-footer__link md-footer__link--next" href="installation/" rel="next"> <div class="md-footer__title"> <span class="md-footer__direction"> Next </span> <div class="md-ellipsis"> Installation </div> </div> <div class="md-footer__button md-icon"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class="md-copyright"> Made with <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank"> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class="md-dialog" data-md-component="dialog"> <div class="md-dialog__inner md-typeset"></div> </div> <script id="__config" type="application/json">{"base": ".", "features": ["navigation.tracking", "navigation.instant", "navigation.indexes", "navigation.prune", "navigation.top", "navigation.footer", "content.code.annotate", "content.code.copy", "announce.dismiss"], "search": "assets/javascripts/workers/search.dfff1995.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "latest", "provider": "mike"}}</script> <script src="assets/javascripts/bundle.dff1b7c8.min.js"></script> <script src="assets/remoteEntry.c85ad3dde8935e6ee6cb.js"></script><script src="assets/remoteEntry.648ab8da812d1050c3bb.js"></script><script src="assets/bundle.e5cea8c4e23d38b36ef9.js"></script> </body> </html>